---
title: "From Daily to Monthly Tracking Error: Complete Derivation and Intuition"
subtitle: "Understanding autocovariance, cross-sectional drift, and TE scaling"
format:
  html:
    toc: true
    code-fold: true
---

## Overview

This document provides a comprehensive derivation of how tracking error scales from daily to monthly horizons. We'll see that the relationship isn't just about square-root-of-time scaling — it fundamentally depends on the **autocovariance structure** of active returns.

**Key insight:** When your overweight positions persistently outperform (or underperform), monthly tracking error can be higher than what daily TE would predict. When performance mean-reverts, monthly TE can be lower.

---

## 1. Foundation: Daily Active Returns and Tracking Error

### 1.1 Definition of active returns

Tracking error measures how much a portfolio's returns deviate from its benchmark over time. We start with **daily active returns**:

$$
a_t = r_t^{P} - r_t^{B}
$$

where:

- $r_t^{P}$ = portfolio's daily return on day $t$
- $r_t^{B}$ = benchmark's daily return on day $t$
- $a_t$ = active return (portfolio excess over benchmark)

### 1.2 Daily tracking error (sample estimate)

Given $N$ days of data, we compute:

**Daily sample mean:**
$$
\bar{a} = \frac{1}{N}\sum_{t=1}^{N} a_t
$$

**Daily sample variance:**
$$
\sigma_d^2 = \frac{1}{N-1}\sum_{t=1}^{N} (a_t - \bar{a})^2
$$

**Daily tracking error:**
$$
TE_d = \sqrt{\sigma_d^2}
$$

This is the standard deviation of active returns — it tells us how much the portfolio typically deviates from the benchmark each day.

### 1.3 Annualizing daily tracking error

To express daily TE on an annualized basis, we scale by the square root of the number of trading days per year:

$$
TE_{d,\text{ann}} = TE_d \times \sqrt{252}
$$

**Important assumption:** This simple scaling assumes daily returns are **independent and identically distributed** (no autocorrelation). If returns are serially correlated, this scaling will under- or over-estimate annual risk. That's what the rest of this derivation explores.

---

## 2. Monthly Active Returns: Building From Daily Data

### 2.1 Constructing monthly returns

Let each month $m$ have $D$ trading days (typically $D \approx 21$). The **monthly active return** is the sum of daily active returns within that month:

$$
A_m = \sum_{i=1}^{D} a_{m,i}
$$

where $a_{m,i}$ denotes the daily active return on day $i$ within month $m$.

Over $M$ months, we can compute:

**Monthly sample mean:**
$$
\bar{A} = \frac{1}{M}\sum_{m=1}^{M} A_m
$$

**Monthly sample variance:**
$$
\sigma_m^2 = \frac{1}{M-1}\sum_{m=1}^{M} (A_m - \bar{A})^2
$$

**Monthly tracking error:**
$$
TE_m = \sqrt{\sigma_m^2}
$$

### 2.2 Annualizing monthly tracking error

Similarly, we can annualize monthly TE by scaling by the square root of months per year:

$$
TE_{m,\text{ann}} = TE_m \times \sqrt{12}
$$

Now the question is: **How does $TE_{m,\text{ann}}$ relate to $TE_{d,\text{ann}}$?** Are they equal? If not, why not?

---

## 3. The Core: Variance-of-a-Sum Expansion

### 3.1 General variance-of-a-sum formula

To understand monthly variance, we need to expand the variance of a sum. For any two random variables:

$$
\mathrm{Var}(X + Y) = \mathrm{Var}(X) + \mathrm{Var}(Y) + 2\,\mathrm{Cov}(X, Y)
$$

For $D$ daily returns within a month:

$$
\mathrm{Var}(A_m) = \mathrm{Var}\!\left(\sum_{i=1}^{D} a_{m,i}\right)
= \sum_{i=1}^{D} \mathrm{Var}(a_{m,i})
+ 2\!\sum_{i<j} \mathrm{Cov}(a_{m,i}, a_{m,j})
$$

The first term is the sum of individual variances; the second term captures **covariances between different days**.

### 3.2 Stationarity assumption

To simplify, assume **within-month stationarity**:

- Each daily return has the same variance: $\mathrm{Var}(a_{m,i}) = \sigma_d^2$
- The covariance depends only on the time lag $k$: $\mathrm{Cov}(a_{m,i}, a_{m,j}) = \gamma_{|j-i|}$

where:
$$
\gamma_k = \mathrm{Cov}(a_t, a_{t+k})
$$

is the **lag-$k$ autocovariance** of active returns.

Think of this as the covariance between active returns on a particular day $i$ and another day $j$ with a separation of $k$ days between them ie: $k=|j-i|$.

### 3.3 Counting pairs by lag

For a given lag $k$ (where $k = 1, 2, \ldots, D-1$):

- There are exactly $(D - k)$ pairs $(i, j)$ with $j - i = k$

For example, with $D=21$:

- Lag 1: pairs $(1,2), (2,3), \ldots, (20,21)$ → 20 pairs
- Lag 2: pairs $(1,3), (2,4), \ldots, (19,21)$ → 19 pairs
- ...
- Lag 20: pair $(1,21)$ → 1 pair

### 3.4 Compact expression for monthly variance

Putting it together:

$$
\mathrm{Var}(A_m) = D\,\sigma_d^2 + 2\sum_{k=1}^{D-1} (D-k)\,\gamma_k
$$

**Components:**

- First term: $D\,\sigma_d^2$ — variance contribution if returns were independent
- Second term: $2\sum (D-k)\gamma_k$ — adjustment for serial correlation

### 3.5 Monthly tracking error (population form)

Taking the square root:

$$
TE_m = \sqrt{\,D\,\sigma_d^2 + 2\sum_{k=1}^{D-1}(D-k)\,\gamma_k\,}
$$

**Special case (no autocorrelation):** If $\gamma_k = 0$ for all $k$:

$$
TE_m = \sqrt{D}\,TE_d
$$

With $D=21$, this gives $TE_m \approx 4.58 \times TE_d$ — the familiar square-root scaling.

---

## 4. The Key Result: Monthly vs Daily Annualized TE

### 4.1 Deriving the ratio

We have:

- Daily annualized: $TE_{d,\text{ann}} = TE_d \sqrt{252}$
- Monthly annualized: $TE_{m,\text{ann}} = TE_m \sqrt{12}$

Taking the ratio:

$$
\frac{TE_{m,\text{ann}}}{TE_{d,\text{ann}}}
= \frac{TE_m \sqrt{12}}{TE_d \sqrt{252}}
= \sqrt{\frac{12}{252}} \times \frac{TE_m}{TE_d}
$$

Substitute the expression for $TE_m$:

$$
\frac{TE_{m,\text{ann}}}{TE_{d,\text{ann}}}
= \sqrt{\frac{12}{252}}
\sqrt{\frac{D\,\sigma_d^2 + 2\sum_{k=1}^{D-1}(D-k)\gamma_k}{\sigma_d^2}}
$$

Simplify:

$$
\frac{TE_{m,\text{ann}}}{TE_{d,\text{ann}}}
= \sqrt{\frac{12\,D}{252}}
\sqrt{1 + \frac{2}{\sigma_d^2}\sum_{k=1}^{D-1}\frac{(D-k)}{D}\,\gamma_k}
$$

### 4.2 Standard case: $D = 21$ trading days per month

With $D=21$:

$$
\frac{12 \times 21}{252} = \frac{252}{252} = 1
$$

So:

$$
\frac{TE_{m,\text{ann}}}{TE_{d,\text{ann}}}
= \sqrt{\,1 + \frac{2}{21\,\sigma_d^2}\sum_{k=1}^{20}(21-k)\,\gamma_k\,}
$$

**Interpretation:**

- If $\sum (21-k)\gamma_k = 0$ (no net autocorrelation), then the ratio equals 1 → monthly and daily annualized TE match
- If $\sum (21-k)\gamma_k > 0$ (positive autocorrelation), then $TE_{m,\text{ann}} > TE_{d,\text{ann}}$
- If $\sum (21-k)\gamma_k < 0$ (negative autocorrelation), then $TE_{m,\text{ann}} < TE_{d,\text{ann}}$

---

## 5. Understanding Autocovariance: What Does $\gamma_k$ Mean?

### 5.1 Definition

$$
\gamma_k = \mathrm{Cov}(a_t, a_{t+k}) = \mathbb{E}[(a_t - \bar{a})(a_{t+k} - \bar{a})]
$$

This measures whether active returns today are related to active returns $k$ days from now.

### 5.2 Interpretation table

| **Behavior** | **$\gamma_k$ sign** | **Interpretation** | **Impact on TE** |
|--------------|---------------------|-------------------|------------------|
| **Persistent drift** | $> 0$ | Today's outperformance tends to continue | $TE_m > \sqrt{D}\,TE_d$ |
| **Mean reversion** | $< 0$ | Today's outperformance tends to reverse | $TE_m < \sqrt{D}\,TE_d$ |
| **No serial correlation** | $\approx 0$ | Today's performance is unrelated to tomorrow's | $TE_m \approx \sqrt{D}\,TE_d$ |

### 5.3 Why does positive $\gamma_k$ increase monthly TE?

When active returns are **positively autocorrelated**:

- A good day (portfolio beats benchmark) tends to be followed by more good days
- A bad day tends to be followed by more bad days
- This **compounding effect** makes monthly swings larger than if each day were independent

Conversely, **negative autocorrelation** means good days are followed by bad days (and vice versa), causing day-to-day returns to partially cancel out over the month.

---

## 6. Connecting Autocovariance to Portfolio Construction

### 6.1 Active return decomposition

Recall that active return can be decomposed into stock-level contributions:

$$
a_t = \sum_{i} \Delta w_{i,t}\,r_{i,t}
$$

where:
- $\Delta w_{i,t} = w_{P,i,t} - w_{B,i,t}$ is the active weight in stock $i$
- $r_{i,t}$ is the return of stock $i$ on day $t$

### 6.2 Autocovariance in terms of holdings

The autocovariance of active returns can be written as:

$$
\gamma_k = \mathrm{Cov}(a_t, a_{t+k})
= \sum_{i,j} \mathbb{E}[\Delta w_{i,t}\,\Delta w_{j,t+k}]\,\mathrm{Cov}(r_{i,t}, r_{j,t+k})
$$

This shows that $\gamma_k$ depends on:

1. **Persistence of active weights** ($\Delta w_{i,t}$ vs $\Delta w_{j,t+k}$)
2. **Serial correlation in stock returns** ($\mathrm{Cov}(r_{i,t}, r_{j,t+k})$)

### 6.3 When is $\gamma_k$ positive? (Persistent drift)

- **Sustained overweight in outperforming sectors** (e.g., Tech, Growth stocks keep winning)
- **Stable portfolio positions** with minimal rebalancing
- **Momentum effects** in the cross-section of stocks
- **Factor persistence** (value, quality, etc. keep driving returns in the same direction)

→ **Result:** Cross-sectional drift accumulates → divergence between portfolio and benchmark grows → $TE_{m,\text{ann}} > TE_{d,\text{ann}}$

### 6.4 When is $\gamma_k$ negative? (Mean reversion)

- **Rapid mean-reversion** of factor exposures (yesterday's winners become today's losers)
- **Frequent rebalancing** back toward benchmark weights
- **Contrarian behavior** in portfolio positions
- **Short-term reversals** in stock prices

→ **Result:** Drift collapses as gains reverse → $TE_{m,\text{ann}} < TE_{d,\text{ann}}$

---

## 7. Practical Example (Python Simulation)

Let's compute the ratio $TE_{m,\text{ann}} / TE_{d,\text{ann}}$ under different autocorrelation scenarios.

```{python}
import numpy as np
np.random.seed(42)

# Parameters
D = 21                # trading days per month
sigma_d = 0.01        # daily TE = 1% (annualized: ~15.9%)

# Calculate the theoretical limit for negative autocovariance
# Constraint: 1 + 2/(D*sigma_d^2) * sum_gamma >= 0
# Therefore: sum_gamma >= -D*sigma_d^2/2
max_neg_autocov_sum = -D * sigma_d**2 / 2

# Use 80% of the theoretical limit for safety (allows variance to be positive)
safe_factor = 0.8

# Case 1: Positive autocorrelation (persistent drift)
# Assume autocovariance decays linearly with lag
gamma_scale_pos = 0.000003  # Much smaller to show realistic effect
gamma_pos = [gamma_scale_pos * (1 - k/D) for k in range(1, D)]
autocov_sum_pos = sum((D - k) * g for k, g in enumerate(gamma_pos, 1))
ratio_pos = np.sqrt(1 + 2 / (D * sigma_d**2) * autocov_sum_pos)

# Case 2: Negative autocorrelation (mean reversion)
# Use same magnitude but negative, staying within theoretical bounds
gamma_scale_neg = -gamma_scale_pos
gamma_neg = [gamma_scale_neg * (1 - k/D) for k in range(1, D)]
autocov_sum_neg = sum((D - k) * g for k, g in enumerate(gamma_neg, 1))
ratio_neg = np.sqrt(1 + 2 / (D * sigma_d**2) * autocov_sum_neg)

# Case 3: No autocorrelation (baseline)
ratio_zero = 1.0

print("=" * 60)
print("TE Ratio: Monthly Annualized / Daily Annualized")
print("=" * 60)
print(f"Persistent drift (positive γ):   {ratio_pos:.4f}")
print(f"No autocorrelation (γ = 0):       {ratio_zero:.4f}")
print(f"Mean reversion (negative γ):      {ratio_neg:.4f}")
print("=" * 60)

# Calculate percentage differences
pct_higher = (ratio_pos - 1) * 100
pct_lower = (1 - ratio_neg) * 100

print(f"\nInterpretation:")
print(f"  - With persistent drift, monthly TE is ~{pct_higher:.1f}% higher than daily TE predicts")
print(f"  - With mean reversion, monthly TE is ~{pct_lower:.1f}% lower than daily TE predicts")
print(f"\nAutocovariance details:")
print(f"  - Positive case: Σ(D-k)γₖ = {autocov_sum_pos:.7f}")
print(f"  - Negative case: Σ(D-k)γₖ = {autocov_sum_neg:.7f}")
print(f"  - Theoretical limit (negative): {max_neg_autocov_sum:.7f}")
```

**What this shows:**

- Even modest autocorrelation (γₖ ≈ ±0.000003) can cause meaningful 5-15% differences in annualized TE
- The effect is symmetric: positive autocorrelation increases monthly TE by roughly the same amount that negative autocorrelation decreases it
- There's a theoretical limit to how negative autocovariances can be: Σ(D-k)γₖ ≥ -D·σ²ᵈ/2, otherwise monthly variance would be negative (impossible)
- In real portfolios with strong factor bets or momentum strategies, autocovariances can be much larger, leading to more dramatic differences between daily and monthly TE estimates

---

## 8. Summary: Three Regimes of TE Scaling

| **Scenario** | **Autocorrelation** | **Sign of $\sum (D-k)\gamma_k$** | **Result** |
|--------------|---------------------|----------------------------------|------------|
| **Persistent drift** | Positive $\gamma_k$ | Positive | $TE_{m,\text{ann}} > TE_{d,\text{ann}}$ |
| **Random walk** | Zero $\gamma_k$ | Zero | $TE_{m,\text{ann}} = TE_{d,\text{ann}}$ |
| **Mean reversion** | Negative $\gamma_k$ | Negative | $TE_{m,\text{ann}} < TE_{d,\text{ann}}$ |

---

## 9. Key Takeaways

1. **Tracking error scaling is NOT just square-root-of-time** — it depends fundamentally on the **autocovariance structure** of active returns.

2. **Persistent outperformance** (positive $\gamma_k$) means overweight positions keep beating the benchmark → monthly TE exceeds what daily TE predicts.

3. **Mean reversion** (negative $\gamma_k$) means gains reverse → monthly TE is lower than daily TE predicts.

4. **Cross-sectional drift** is the economic driver: when active weights are concentrated in persistently outperforming sectors/factors, $\gamma_k > 0$.

5. **Rebalancing frequency matters**: frequent rebalancing can reduce autocorrelation (and thus reduce monthly TE) by cutting off drift before it compounds.

---

## 10. Notation Reference

| **Symbol** | **Meaning** |
|------------|-------------|
| $a_t$ | Daily active return on day $t$ (portfolio - benchmark) |
| $A_m$ | Monthly active return for month $m$ (sum of daily actives) |
| $D$ | Number of trading days per month (typically 21) |
| $\sigma_d^2$ | Daily variance of active returns |
| $TE_d$ | Daily tracking error = $\sqrt{\sigma_d^2}$ |
| $TE_{d,\text{ann}}$ | Daily TE annualized = $TE_d \sqrt{252}$ |
| $TE_m$ | Monthly tracking error |
| $TE_{m,\text{ann}}$ | Monthly TE annualized = $TE_m \sqrt{12}$ |
| $\gamma_k$ | Lag-$k$ autocovariance = $\mathrm{Cov}(a_t, a_{t+k})$ |
| $\Delta w_{i,t}$ | Active weight in stock $i$ at time $t$ (portfolio - benchmark) |

---

## 11. Extensions and Further Reading

### 11.1 Rolling autocovariance estimation
Track how $\gamma_k$ evolves over time to detect regime changes:

- Is your portfolio entering a phase of persistent drift?
- Are factor premiums showing stronger autocorrelation?

### 11.2 Rebalancing frequency analysis
Test how different rebalancing schedules (daily, weekly, monthly) affect realized $\gamma_k$ and thus monthly TE.

### 11.3 Direct indexing and factor overlays
Use this framework to:

- Calibrate TE budgets for tax-loss harvesting strategies
- Understand how ESG tilts or smart beta overlays affect TE scaling
- Size long-short factor exposures to hit target tracking error at both daily and monthly horizons

### 11.4 Multi-horizon risk management
Extend this analysis to quarterly or annual horizons to understand how autocorrelation compounds over longer periods.

---

## Navigation

### Continue Learning:

**← [Overview: Tracking Error Across Time Horizons](index.html)**  
Return to the intuitive overview with practical examples and real-world portfolio implications.

**→ [Technical Math: AR(1) & Newey-West](technical_math.html)**  
Advance to rigorous mathematical treatment with closed-form AR(1) solutions and Newey-West estimation.

### External Resources:

- **Interactive App:** [Tracking Error Lab on Streamlit](https://tracking-error-lab-kgkju98o4pqxdjoevqtsay.streamlit.app/)
- **GitHub Repository:** [TejasViswa/tracking-error-lab](https://github.com/TejasViswa/tracking-error-lab)
