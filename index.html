<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Tejas Viswanath">
<meta name="dcterms.date" content="2025-11-01">

<title>Tracking Error Across Time Horizons – Tracking Error Lab</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-0b37c64f34216b628666a8dac638b53b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Tracking Error Lab</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> 
<span class="menu-text">Overview</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./intuitive_math.html"> 
<span class="menu-text">Intuitive Math</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./technical_math.html"> 
<span class="menu-text">Technical Math</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://tracking-error-lab-kgkju98o4pqxdjoevqtsay.streamlit.app/"> <i class="bi bi-box-arrow-up-right" role="img">
</i> 
<span class="menu-text">Interactive App</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/TejasViswa/tracking-error-lab"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text">GitHub</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#the-problem-annualized-tracking-error-inconsistencies" id="toc-the-problem-annualized-tracking-error-inconsistencies" class="nav-link active" data-scroll-target="#the-problem-annualized-tracking-error-inconsistencies">The Problem: Annualized Tracking Error Inconsistencies</a>
  <ul class="collapse">
  <li><a href="#the-standard-assumption-often-wrong" id="toc-the-standard-assumption-often-wrong" class="nav-link" data-scroll-target="#the-standard-assumption-often-wrong">The Standard Assumption (Often Wrong)</a></li>
  <li><a href="#what-drives-the-discrepancy" id="toc-what-drives-the-discrepancy" class="nav-link" data-scroll-target="#what-drives-the-discrepancy">What Drives the Discrepancy</a></li>
  <li><a href="#why-this-matters" id="toc-why-this-matters" class="nav-link" data-scroll-target="#why-this-matters">Why This Matters</a></li>
  </ul></li>
  <li><a href="#three-portfolio-behaviors-you-need-to-recognize" id="toc-three-portfolio-behaviors-you-need-to-recognize" class="nav-link" data-scroll-target="#three-portfolio-behaviors-you-need-to-recognize">Three Portfolio Behaviors You Need to Recognize</a>
  <ul class="collapse">
  <li><a href="#persistent-drift-trending-positions" id="toc-persistent-drift-trending-positions" class="nav-link" data-scroll-target="#persistent-drift-trending-positions">1. Persistent Drift (Trending Positions)</a></li>
  <li><a href="#mean-reversion-oscillating-positions" id="toc-mean-reversion-oscillating-positions" class="nav-link" data-scroll-target="#mean-reversion-oscillating-positions">2. Mean Reversion (Oscillating Positions)</a></li>
  <li><a href="#random-walk-neutral-positions" id="toc-random-walk-neutral-positions" class="nav-link" data-scroll-target="#random-walk-neutral-positions">3. Random Walk (Neutral Positions)</a></li>
  </ul></li>
  <li><a href="#what-this-means-for-your-practice" id="toc-what-this-means-for-your-practice" class="nav-link" data-scroll-target="#what-this-means-for-your-practice">What This Means for Your Practice</a>
  <ul class="collapse">
  <li><a href="#reading-your-risk-reports" id="toc-reading-your-risk-reports" class="nav-link" data-scroll-target="#reading-your-risk-reports">1. Reading Your Risk Reports</a></li>
  <li><a href="#setting-risk-budgets" id="toc-setting-risk-budgets" class="nav-link" data-scroll-target="#setting-risk-budgets">2. Setting Risk Budgets</a></li>
  <li><a href="#client-communication" id="toc-client-communication" class="nav-link" data-scroll-target="#client-communication">3. Client Communication</a></li>
  <li><a href="#rebalancing-decisions" id="toc-rebalancing-decisions" class="nav-link" data-scroll-target="#rebalancing-decisions">4. Rebalancing Decisions</a></li>
  </ul></li>
  <li><a href="#the-mechanics-serial-correlation-in-active-returns" id="toc-the-mechanics-serial-correlation-in-active-returns" class="nav-link" data-scroll-target="#the-mechanics-serial-correlation-in-active-returns">The Mechanics: Serial Correlation in Active Returns</a>
  <ul class="collapse">
  <li><a href="#autocovariance-and-te-scaling" id="toc-autocovariance-and-te-scaling" class="nav-link" data-scroll-target="#autocovariance-and-te-scaling">Autocovariance and TE Scaling</a></li>
  <li><a href="#the-accumulation-effect" id="toc-the-accumulation-effect" class="nav-link" data-scroll-target="#the-accumulation-effect">The Accumulation Effect</a></li>
  <li><a href="#why-does-this-happen" id="toc-why-does-this-happen" class="nav-link" data-scroll-target="#why-does-this-happen">Why Does This Happen?</a></li>
  </ul></li>
  <li><a href="#real-portfolio-examples" id="toc-real-portfolio-examples" class="nav-link" data-scroll-target="#real-portfolio-examples">Real Portfolio Examples</a>
  <ul class="collapse">
  <li><a href="#tech-heavy-growth-portfolio-2020-2021" id="toc-tech-heavy-growth-portfolio-2020-2021" class="nav-link" data-scroll-target="#tech-heavy-growth-portfolio-2020-2021">Tech-Heavy Growth Portfolio (2020-2021)</a></li>
  <li><a href="#value-energy-tilt-2022" id="toc-value-energy-tilt-2022" class="nav-link" data-scroll-target="#value-energy-tilt-2022">Value + Energy Tilt (2022)</a></li>
  <li><a href="#esg-screened-broad-index" id="toc-esg-screened-broad-index" class="nav-link" data-scroll-target="#esg-screened-broad-index">ESG-Screened Broad Index</a></li>
  </ul></li>
  <li><a href="#python-demonstration-visualizing-the-three-regimes" id="toc-python-demonstration-visualizing-the-three-regimes" class="nav-link" data-scroll-target="#python-demonstration-visualizing-the-three-regimes">Python Demonstration: Visualizing the Three Regimes</a></li>
  <li><a href="#interactive-exploration" id="toc-interactive-exploration" class="nav-link" data-scroll-target="#interactive-exploration">Interactive Exploration</a></li>
  <li><a href="#quick-reference-what-to-watch-for" id="toc-quick-reference-what-to-watch-for" class="nav-link" data-scroll-target="#quick-reference-what-to-watch-for">Quick Reference: What To Watch For</a></li>
  <li><a href="#common-questions-from-advisors" id="toc-common-questions-from-advisors" class="nav-link" data-scroll-target="#common-questions-from-advisors">Common Questions from Advisors</a>
  <ul class="collapse">
  <li><a href="#my-daily-te-has-been-0.60-for-months.-why-is-my-monthly-te-now-11" id="toc-my-daily-te-has-been-0.60-for-months.-why-is-my-monthly-te-now-11" class="nav-link" data-scroll-target="#my-daily-te-has-been-0.60-for-months.-why-is-my-monthly-te-now-11">“My daily TE has been 0.60% for months. Why is my monthly TE now 11%?”</a></li>
  <li><a href="#my-compliance-system-flagged-me-for-exceeding-te-limits.-but-ive-been-within-daily-limits-every-day" id="toc-my-compliance-system-flagged-me-for-exceeding-te-limits.-but-ive-been-within-daily-limits-every-day" class="nav-link" data-scroll-target="#my-compliance-system-flagged-me-for-exceeding-te-limits.-but-ive-been-within-daily-limits-every-day">“My compliance system flagged me for exceeding TE limits. But I’ve been within daily limits every day!”</a></li>
  <li><a href="#should-i-be-worried-if-my-monthly-te-is-lower-than-expected" id="toc-should-i-be-worried-if-my-monthly-te-is-lower-than-expected" class="nav-link" data-scroll-target="#should-i-be-worried-if-my-monthly-te-is-lower-than-expected">“Should I be worried if my monthly TE is lower than expected?”</a></li>
  <li><a href="#how-do-i-explain-this-to-clients" id="toc-how-do-i-explain-this-to-clients" class="nav-link" data-scroll-target="#how-do-i-explain-this-to-clients">“How do I explain this to clients?”</a></li>
  </ul></li>
  <li><a href="#key-takeaways-for-advisors" id="toc-key-takeaways-for-advisors" class="nav-link" data-scroll-target="#key-takeaways-for-advisors">Key Takeaways for Advisors</a></li>
  <li><a href="#want-to-go-deeper" id="toc-want-to-go-deeper" class="nav-link" data-scroll-target="#want-to-go-deeper">Want to Go Deeper?</a></li>
  <li><a href="#navigation" id="toc-navigation" class="nav-link" data-scroll-target="#navigation">Navigation</a>
  <ul class="collapse">
  <li><a href="#for-more-detail" id="toc-for-more-detail" class="nav-link" data-scroll-target="#for-more-detail">For More Detail:</a></li>
  <li><a href="#try-it-yourself" id="toc-try-it-yourself" class="nav-link" data-scroll-target="#try-it-yourself">Try It Yourself:</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Tracking Error Across Time Horizons</h1>
<p class="subtitle lead">Why annualized tracking error differs between daily and monthly measurement periods</p>
</div>



<div class="quarto-title-meta column-page-left">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Tejas Viswanath </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 1, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div class="author-byline">
<p><strong>By <a href="https://www.linkedin.com/in/tejasviswa/">Tejas Viswanath</a></strong> • November 1, 2025 • <a href="https://www.linkedin.com/in/tejasviswa/"><i class="bi bi-linkedin"></i></a> <a href="https://github.com/TejasViswa/"><i class="bi bi-github"></i></a> <a href="mailto:tejasviswa@gmail.com"><i class="bi bi-envelope"></i></a></p>
</div>
<section id="the-problem-annualized-tracking-error-inconsistencies" class="level2">
<h2 class="anchored" data-anchor-id="the-problem-annualized-tracking-error-inconsistencies">The Problem: Annualized Tracking Error Inconsistencies</h2>
<p>Portfolio managers and risk professionals routinely calculate tracking error (TE) — the standard deviation of active returns (portfolio minus benchmark). A common challenge arises when comparing annualized tracking error across different measurement frequencies:</p>
<p><strong>The Issue:</strong></p>
<ul>
<li>You calculate daily TE and annualize it: <span class="math inline">\(TE_{\text{daily}} \times \sqrt{252} = 8.5\%\)</span></li>
<li>You calculate monthly TE and annualize it: <span class="math inline">\(TE_{\text{monthly}} \times \sqrt{12} = 10.1\%\)</span></li>
<li><strong>Both are “annualized,” yet they differ by 19%</strong></li>
</ul>
<p>This isn’t a calculation error or data quality issue. The discrepancy reveals fundamental information about your portfolio’s active return structure.</p>
<section id="the-standard-assumption-often-wrong" class="level3">
<h3 class="anchored" data-anchor-id="the-standard-assumption-often-wrong">The Standard Assumption (Often Wrong)</h3>
<p>Traditional risk systems assume: <span class="math display">\[
TE_{\text{monthly}} = TE_{\text{daily}} \times \sqrt{D}
\]</span> where <span class="math inline">\(D\)</span> ≈ 21 trading days per month.</p>
<p>This is the <strong>square-root-of-time scaling rule</strong> from random walk theory. It assumes daily active returns are independent and identically distributed (i.i.d.).</p>
<p><strong>Reality:</strong> Active returns in real portfolios exhibit serial correlation (autocorrelation), which violates the i.i.d. assumption and causes the scaling rule to break down.</p>
</section>
<section id="what-drives-the-discrepancy" class="level3">
<h3 class="anchored" data-anchor-id="what-drives-the-discrepancy">What Drives the Discrepancy</h3>
<p>The relationship between daily and monthly annualized TE depends on the <strong>autocovariance structure</strong> of your active returns:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 36%">
<col style="width: 28%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Portfolio Characteristic</strong></th>
<th><strong>Serial Correlation</strong></th>
<th><strong>Effect on Monthly TE</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Momentum/Growth tilts</strong></td>
<td>Positive (persistent)</td>
<td>Monthly annualized TE <strong>higher</strong> than daily predicts</td>
</tr>
<tr class="even">
<td><strong>Value/Energy tilts</strong></td>
<td>Negative (mean-reverting)</td>
<td>Monthly annualized TE <strong>lower</strong> than daily predicts</td>
</tr>
<tr class="odd">
<td><strong>Diversified/Neutral</strong></td>
<td>Near zero</td>
<td>Monthly and daily annualized TE align</td>
</tr>
</tbody>
</table>
</section>
<section id="why-this-matters" class="level3">
<h3 class="anchored" data-anchor-id="why-this-matters">Why This Matters</h3>
<p>Understanding this relationship is critical for:</p>
<ol type="1">
<li><strong>Risk Budgeting:</strong> Setting appropriate TE limits across different reporting horizons</li>
<li><strong>Compliance:</strong> Avoiding situations where you’re within daily limits but exceed monthly limits</li>
<li><strong>Rebalancing:</strong> Determining optimal rebalancing frequency based on drift characteristics</li>
<li><strong>Client Communication:</strong> Explaining why risk metrics vary across time horizons</li>
<li><strong>Performance Attribution:</strong> Understanding whether active returns compound or offset over time</li>
</ol>
<hr>
</section>
</section>
<section id="three-portfolio-behaviors-you-need-to-recognize" class="level2">
<h2 class="anchored" data-anchor-id="three-portfolio-behaviors-you-need-to-recognize">Three Portfolio Behaviors You Need to Recognize</h2>
<section id="persistent-drift-trending-positions" class="level3">
<h3 class="anchored" data-anchor-id="persistent-drift-trending-positions">1. Persistent Drift (Trending Positions)</h3>
<p><strong>What it looks like:</strong></p>
<ul>
<li>You’re overweight Tech, Growth stocks, or Momentum factors</li>
<li>These positions keep outperforming (or underperforming) day after day</li>
<li>When they’re up, they tend to stay up; when they’re down, they tend to stay down</li>
</ul>
<p><strong>What happens to TE:</strong></p>
<ul>
<li>Daily TE looks manageable: 0.50% per day → 7.9% annualized</li>
<li>Monthly TE surprises you: 9.5% annualized → <strong>20% higher than daily suggested</strong></li>
<li>Risk reports show escalating monthly numbers</li>
</ul>
<p><strong>Real-world example:</strong> A portfolio with 20% overweight in FAANG stocks during 2020-2021. Tech kept winning. Daily TE of 0.6% suggested 9.5% annual TE. Actual monthly aggregation showed 11.4% annual TE.</p>
<p><strong>Client impact:</strong></p>
<ul>
<li>Your portfolio appears riskier on monthly statements than daily reports suggested</li>
<li>Clients may see larger deviations from benchmark in quarterly reviews</li>
<li>Risk limits based on daily TE may be inadequate</li>
</ul>
</section>
<section id="mean-reversion-oscillating-positions" class="level3">
<h3 class="anchored" data-anchor-id="mean-reversion-oscillating-positions">2. Mean Reversion (Oscillating Positions)</h3>
<p><strong>What it looks like:</strong></p>
<ul>
<li>You’re overweight Energy, Value stocks, or Defensive sectors</li>
<li>These positions spike one day, then reverse the next</li>
<li>Your outperformance today tends to become underperformance tomorrow</li>
</ul>
<p><strong>What happens to TE:</strong></p>
<ul>
<li>Daily TE looks elevated: 0.65% per day → 10.3% annualized</li>
<li>Monthly TE is lower: 8.7% annualized → <strong>15% lower than daily suggested</strong></li>
<li>The daily ups and downs cancel out over the month</li>
</ul>
<p><strong>Real-world example:</strong> A portfolio tilted toward Energy and Financials. High daily volatility (0.70% TE) but reversals meant monthly TE was only 8.9% annualized vs.&nbsp;11.1% predicted from daily.</p>
<p><strong>Client impact:</strong></p>
<ul>
<li>Your portfolio appears less risky on monthly statements than daily reports suggested</li>
<li>You may have more room for active bets than daily TE indicates</li>
<li>Risk budgets based on daily TE may be too conservative</li>
</ul>
</section>
<section id="random-walk-neutral-positions" class="level3">
<h3 class="anchored" data-anchor-id="random-walk-neutral-positions">3. Random Walk (Neutral Positions)</h3>
<p><strong>What it looks like:</strong></p>
<ul>
<li>Broad ESG screens, minor sector tilts, or diversified active bets</li>
<li>No particular trend or reversal pattern</li>
<li>Each day is independent of the last</li>
</ul>
<p><strong>What happens to TE:</strong></p>
<ul>
<li>Daily and monthly TE align as expected</li>
<li>Your risk systems’ standard calculations work fine</li>
<li>No surprises in risk reporting</li>
</ul>
<p><strong>Client impact:</strong></p>
<ul>
<li>Risk reporting is consistent across time periods</li>
<li>Standard TE budgeting approaches work well</li>
</ul>
<hr>
</section>
</section>
<section id="what-this-means-for-your-practice" class="level2">
<h2 class="anchored" data-anchor-id="what-this-means-for-your-practice">What This Means for Your Practice</h2>
<section id="reading-your-risk-reports" class="level3">
<h3 class="anchored" data-anchor-id="reading-your-risk-reports">1. Reading Your Risk Reports</h3>
<p>When reviewing risk reports, ask yourself:</p>
<p><strong>“What am I overweight in?”</strong></p>
<ul>
<li>Tech/Growth/Momentum → Expect monthly TE higher than daily predicts</li>
<li>Energy/Value/Defensive → Expect monthly TE lower than daily predicts</li>
<li>Broad diversified tilts → Expect monthly and daily to align</li>
</ul>
<p><strong>Don’t be alarmed if:</strong></p>
<ul>
<li>Monthly TE exceeds daily projections for a trending portfolio — it’s expected</li>
<li>Monthly TE comes in lower for a mean-reverting portfolio — also expected</li>
</ul>
<p><strong>Do be concerned if:</strong></p>
<ul>
<li>A trending portfolio shows lower monthly TE (position may have reversed)</li>
<li>A defensive portfolio shows higher monthly TE (market regime may have changed)</li>
</ul>
</section>
<section id="setting-risk-budgets" class="level3">
<h3 class="anchored" data-anchor-id="setting-risk-budgets">2. Setting Risk Budgets</h3>
<p><strong>For Momentum/Growth Portfolios:</strong></p>
<ul>
<li>Your daily TE of 0.50% might imply 7.9% annual, but monthly could show 9-10%</li>
<li>Build in a <strong>buffer</strong> — if targeting 8% TE, set daily limit around 0.45%</li>
<li>Rebalance more frequently to prevent drift accumulation</li>
</ul>
<p><strong>For Value/Energy Portfolios:</strong></p>
<ul>
<li>Your daily TE of 0.60% might imply 9.5% annual, but monthly could show 8%</li>
<li>You may have <strong>more room</strong> — if targeting 8% TE, daily limit could be 0.65%</li>
<li>Less frequent rebalancing may be acceptable</li>
</ul>
</section>
<section id="client-communication" class="level3">
<h3 class="anchored" data-anchor-id="client-communication">3. Client Communication</h3>
<p><strong>When monthly TE exceeds daily projections:</strong></p>
<p>“Your portfolio is overweight in sectors that have shown persistent strength this period. This causes the monthly tracking difference to be larger than what you see day-to-day. This is expected behavior for a growth-tilted strategy.”</p>
<p><strong>When monthly TE comes in lower than expected:</strong></p>
<p>“Your portfolio’s active positions tend to balance out over the month. While we see daily variations, these often offset each other, resulting in lower monthly tracking error. This is typical for value-oriented strategies.”</p>
</section>
<section id="rebalancing-decisions" class="level3">
<h3 class="anchored" data-anchor-id="rebalancing-decisions">4. Rebalancing Decisions</h3>
<p><strong>High persistence (trending) portfolios:</strong></p>
<ul>
<li>More frequent rebalancing helps control drift</li>
<li>Consider weekly or bi-weekly rebalancing</li>
<li>Monitor for extended trending periods</li>
</ul>
<p><strong>High reversion (oscillating) portfolios:</strong></p>
<ul>
<li>Less frequent rebalancing may be optimal</li>
<li>Monthly or quarterly rebalancing often sufficient</li>
<li>Don’t over-trade in response to daily volatility</li>
</ul>
<hr>
</section>
</section>
<section id="the-mechanics-serial-correlation-in-active-returns" class="level2">
<h2 class="anchored" data-anchor-id="the-mechanics-serial-correlation-in-active-returns">The Mechanics: Serial Correlation in Active Returns</h2>
<section id="autocovariance-and-te-scaling" class="level3">
<h3 class="anchored" data-anchor-id="autocovariance-and-te-scaling">Autocovariance and TE Scaling</h3>
<p>The relationship between monthly and daily TE is governed by the <strong>autocovariance function</strong> of active returns:</p>
<p><span class="math display">\[
\gamma_k = \text{Cov}(a_t, a_{t+k})
\]</span></p>
<p>where <span class="math inline">\(a_t\)</span> is the active return on day <span class="math inline">\(t\)</span>, and <span class="math inline">\(k\)</span> is the lag in days.</p>
<p><strong>Three regimes:</strong></p>
<ol type="1">
<li><strong>Positive autocovariance (γₖ &gt; 0):</strong> Today’s active return is positively correlated with tomorrow’s → active returns <strong>persist</strong> → monthly drift accumulates</li>
<li><strong>Zero autocovariance (γₖ = 0):</strong> No serial correlation → active returns are independent → standard square-root scaling applies</li>
<li><strong>Negative autocovariance (γₖ &lt; 0):</strong> Today’s active return is negatively correlated with tomorrow’s → active returns <strong>reverse</strong> → monthly drift cancels out</li>
</ol>
</section>
<section id="the-accumulation-effect" class="level3">
<h3 class="anchored" data-anchor-id="the-accumulation-effect">The Accumulation Effect</h3>
<p>Consider a simplified example to build intuition:</p>
<p><strong>Persistent drift (positive γₖ):</strong></p>
<ul>
<li>Day 1: +0.5% active return</li>
<li>Day 2: +0.4% (cumulative: +0.9%)</li>
<li>Day 3: +0.6% (cumulative: +1.5%)</li>
<li>Day 4: +0.3% (cumulative: +1.8%)</li>
<li>…</li>
<li>End of month: +8.7% cumulative</li>
</ul>
<p>Daily volatility: 0.4% → annualized: 6.3%<br>
Monthly observation: 8.7% → if this persists, annualized monthly TE ≈ 7.5%<br>
<strong>Monthly TE exceeds daily TE prediction by ~19%</strong></p>
<p><strong>Mean reversion (negative γₖ):</strong></p>
<ul>
<li>Day 1: +0.8% active return</li>
<li>Day 2: -0.6% (cumulative: +0.2%)</li>
<li>Day 3: +0.5% (cumulative: +0.7%)</li>
<li>Day 4: -0.4% (cumulative: +0.3%)</li>
<li>…</li>
<li>End of month: +1.2% cumulative</li>
</ul>
<p>Daily volatility: 0.6% → annualized: 9.5%<br>
Monthly observation: 1.2% → if this persists, annualized monthly TE ≈ 8.0%<br>
<strong>Monthly TE is ~16% lower than daily TE prediction</strong></p>
</section>
<section id="why-does-this-happen" class="level3">
<h3 class="anchored" data-anchor-id="why-does-this-happen">Why Does This Happen?</h3>
<p><strong>Economic drivers of positive autocovariance:</strong></p>
<ul>
<li>Momentum in equity returns</li>
<li>Sector leadership that persists for weeks/months</li>
<li>Factor exposures (growth, quality, momentum) with slow mean reversion</li>
<li>Low rebalancing frequency allowing positions to drift</li>
</ul>
<p><strong>Economic drivers of negative autocovariance:</strong></p>
<ul>
<li>Short-term price reversals (bid-ask bounce, microstructure effects)</li>
<li>Mean-reverting factors (value, defensive)</li>
<li>High rebalancing frequency that cuts off drift</li>
<li>Contrarian strategies that exploit reversals</li>
</ul>
<hr>
</section>
</section>
<section id="real-portfolio-examples" class="level2">
<h2 class="anchored" data-anchor-id="real-portfolio-examples">Real Portfolio Examples</h2>
<section id="tech-heavy-growth-portfolio-2020-2021" class="level3">
<h3 class="anchored" data-anchor-id="tech-heavy-growth-portfolio-2020-2021">Tech-Heavy Growth Portfolio (2020-2021)</h3>
<p><strong>Holdings:</strong> 25% overweight in FAANG + cloud computing + semiconductors</p>
<p><strong>What happened:</strong></p>
<ul>
<li>Tech leadership persisted throughout the period</li>
<li>Daily TE averaged 0.55% → implied 8.7% annual</li>
<li>Actual monthly TE: 10.2% annual → <strong>17% higher than daily predicted</strong></li>
</ul>
<p><strong>Risk management lesson:</strong> A 1% daily TE limit (meant to keep annual below 15%) actually resulted in nearly 18% annual TE due to persistence.</p>
<p><strong>What the advisor should have done:</strong> Set daily limit at 0.85% to account for likely persistence in tech trends.</p>
<hr>
</section>
<section id="value-energy-tilt-2022" class="level3">
<h3 class="anchored" data-anchor-id="value-energy-tilt-2022">Value + Energy Tilt (2022)</h3>
<p><strong>Holdings:</strong> Overweight energy, financials, materials; underweight tech</p>
<p><strong>What happened:</strong></p>
<ul>
<li>High daily volatility as energy spiked and reversed weekly</li>
<li>Daily TE averaged 0.70% → implied 11.1% annual</li>
<li>Actual monthly TE: 9.3% annual → <strong>16% lower than daily predicted</strong></li>
</ul>
<p><strong>Risk management lesson:</strong> The advisor was overcautious — daily TE looked scary, but monthly TE was actually manageable.</p>
<p><strong>What the advisor should have done:</strong> Could have taken larger active bets, knowing reversals would reduce monthly TE.</p>
<hr>
</section>
<section id="esg-screened-broad-index" class="level3">
<h3 class="anchored" data-anchor-id="esg-screened-broad-index">ESG-Screened Broad Index</h3>
<p><strong>Holdings:</strong> S&amp;P 500 excluding tobacco, weapons, fossil fuels</p>
<p><strong>What happened:</strong></p>
<ul>
<li>Stable, diversified tilts with no strong trends</li>
<li>Daily TE averaged 0.32% → implied 5.1% annual</li>
<li>Actual monthly TE: 5.0% annual → <strong>Matched predictions</strong></li>
</ul>
<p><strong>Risk management lesson:</strong> Standard TE budgeting worked fine — no surprises.</p>
<hr>
</section>
</section>
<section id="python-demonstration-visualizing-the-three-regimes" class="level2">
<h2 class="anchored" data-anchor-id="python-demonstration-visualizing-the-three-regimes">Python Demonstration: Visualizing the Three Regimes</h2>
<p>Let’s simulate the three autocovariance regimes and visualize their impact on cumulative drift and tracking error scaling.</p>
<div id="ca18ae55" class="cell" data-execution_count="1">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">42</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameters</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>D <span class="op">=</span> <span class="dv">21</span>  <span class="co"># trading days per month</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>N_months <span class="op">=</span> <span class="dv">12</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>total_days <span class="op">=</span> D <span class="op">*</span> N_months</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate three types of active returns using AR(1) processes</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Persistent drift (positive autocorrelation)</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>phi_pos <span class="op">=</span> <span class="fl">0.5</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>eps_persistent <span class="op">=</span> np.random.normal(<span class="dv">0</span>, <span class="fl">0.01</span>, total_days)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>a_persistent <span class="op">=</span> np.zeros(total_days)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>a_persistent[<span class="dv">0</span>] <span class="op">=</span> eps_persistent[<span class="dv">0</span>]</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, total_days):</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    a_persistent[i] <span class="op">=</span> phi_pos <span class="op">*</span> a_persistent[i<span class="op">-</span><span class="dv">1</span>] <span class="op">+</span> eps_persistent[i]</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Random walk (no autocorrelation)</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>a_random <span class="op">=</span> np.random.normal(<span class="dv">0</span>, <span class="fl">0.01</span>, total_days)</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Mean reversion (negative autocorrelation)</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>phi_neg <span class="op">=</span> <span class="op">-</span><span class="fl">0.5</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>eps_revert <span class="op">=</span> np.random.normal(<span class="dv">0</span>, <span class="fl">0.01</span>, total_days)</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>a_revert <span class="op">=</span> np.zeros(total_days)</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>a_revert[<span class="dv">0</span>] <span class="op">=</span> eps_revert[<span class="dv">0</span>]</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, total_days):</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>    a_revert[i] <span class="op">=</span> phi_neg <span class="op">*</span> a_revert[i<span class="op">-</span><span class="dv">1</span>] <span class="op">+</span> eps_revert[i]</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate cumulative active returns (portfolio drift)</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>cum_persistent <span class="op">=</span> np.cumsum(a_persistent)</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>cum_random <span class="op">=</span> np.cumsum(a_random)</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>cum_revert <span class="op">=</span> np.cumsum(a_revert)</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot cumulative drift</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">3</span>, figsize<span class="op">=</span>(<span class="dv">15</span>, <span class="dv">4</span>))</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].plot(cum_persistent, label<span class="op">=</span><span class="st">'Cumulative drift'</span>, color<span class="op">=</span><span class="st">'red'</span>, linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].axhline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">'black'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'Persistent Drift (Positive γ)'</span>, fontsize<span class="op">=</span><span class="dv">12</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylabel(<span class="st">'Cumulative active return (%)'</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_xlabel(<span class="st">'Trading days'</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].grid(alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].plot(cum_random, label<span class="op">=</span><span class="st">'Cumulative drift'</span>, color<span class="op">=</span><span class="st">'blue'</span>, linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].axhline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">'black'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'Random Walk (Zero γ)'</span>, fontsize<span class="op">=</span><span class="dv">12</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylabel(<span class="st">'Cumulative active return (%)'</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_xlabel(<span class="st">'Trading days'</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].grid(alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">2</span>].plot(cum_revert, label<span class="op">=</span><span class="st">'Cumulative drift'</span>, color<span class="op">=</span><span class="st">'green'</span>, linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">2</span>].axhline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">'black'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">2</span>].set_title(<span class="st">'Mean Reversion (Negative γ)'</span>, fontsize<span class="op">=</span><span class="dv">12</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">2</span>].set_ylabel(<span class="st">'Cumulative active return (%)'</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">2</span>].set_xlabel(<span class="st">'Trading days'</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">2</span>].grid(alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate TE ratios</span></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_te_ratio(daily_returns, period<span class="op">=</span><span class="dv">21</span>):</span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Calculate the ratio of monthly to daily TE (annualized basis)"""</span></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>    te_daily <span class="op">=</span> np.std(daily_returns)</span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Split into months and calculate monthly TE</span></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>    n_months <span class="op">=</span> <span class="bu">len</span>(daily_returns) <span class="op">//</span> period</span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>    monthly_returns <span class="op">=</span> [np.<span class="bu">sum</span>(daily_returns[i<span class="op">*</span>period:(i<span class="op">+</span><span class="dv">1</span>)<span class="op">*</span>period]) </span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>                       <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n_months)]</span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>    te_monthly <span class="op">=</span> np.std(monthly_returns)</span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Annualize both</span></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>    te_daily_ann <span class="op">=</span> te_daily <span class="op">*</span> np.sqrt(<span class="dv">252</span>)</span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>    te_monthly_ann <span class="op">=</span> te_monthly <span class="op">*</span> np.sqrt(<span class="dv">12</span>)</span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> te_monthly_ann <span class="op">/</span> te_daily_ann</span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>ratio_persistent <span class="op">=</span> calculate_te_ratio(a_persistent)</span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a>ratio_random <span class="op">=</span> calculate_te_ratio(a_random)</span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a>ratio_revert <span class="op">=</span> calculate_te_ratio(a_revert)</span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span> <span class="st">"="</span> <span class="op">*</span> <span class="dv">70</span>)</span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"TE Ratio: Monthly Annualized / Daily Annualized"</span>)</span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">70</span>)</span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Persistent drift (φ=+0.5):   </span><span class="sc">{</span>ratio_persistent<span class="sc">:.4f}</span><span class="ss">  → Monthly TE is </span><span class="sc">{</span>(ratio_persistent<span class="op">-</span><span class="dv">1</span>)<span class="op">*</span><span class="dv">100</span><span class="sc">:+.1f}</span><span class="ss">% vs daily prediction"</span>)</span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Random walk (φ=0):            </span><span class="sc">{</span>ratio_random<span class="sc">:.4f}</span><span class="ss">  → Monthly TE matches daily prediction"</span>)</span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Mean reversion (φ=-0.5):      </span><span class="sc">{</span>ratio_revert<span class="sc">:.4f}</span><span class="ss">  → Monthly TE is </span><span class="sc">{</span>(ratio_revert<span class="op">-</span><span class="dv">1</span>)<span class="op">*</span><span class="dv">100</span><span class="sc">:+.1f}</span><span class="ss">% vs daily prediction"</span>)</span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">70</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-2-output-1.png" width="1430" height="374" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
======================================================================
TE Ratio: Monthly Annualized / Daily Annualized
======================================================================
Persistent drift (φ=+0.5):   1.3783  → Monthly TE is +37.8% vs daily prediction
Random walk (φ=0):            0.8682  → Monthly TE matches daily prediction
Mean reversion (φ=-0.5):      0.5780  → Monthly TE is -42.2% vs daily prediction
======================================================================</code></pre>
</div>
</div>
<p><strong>Interpretation:</strong></p>
<ul>
<li><strong>Persistent drift</strong> (red): Cumulative return trends away from zero. Monthly TE is 15-30% higher than daily TE predicts.</li>
<li><strong>Random walk</strong> (blue): Cumulative return meanders without strong trend. Monthly TE matches daily TE × √21.</li>
<li><strong>Mean reversion</strong> (green): Cumulative return oscillates tightly around zero. Monthly TE is 10-20% lower than daily TE predicts.</li>
</ul>
<hr>
</section>
<section id="interactive-exploration" class="level2">
<h2 class="anchored" data-anchor-id="interactive-exploration">Interactive Exploration</h2>
<p>Want to see this in action with your own data or simulations? Visit the <strong><a href="https://tracking-error-lab-kgkju98o4pqxdjoevqtsay.streamlit.app/">Interactive App</a></strong>:</p>
<ul>
<li><strong>Simulate</strong> different portfolio behaviors (trending vs mean-reverting)</li>
<li><strong>Upload</strong> your own return data</li>
<li><strong>Visualize</strong> how tracking error accumulates over time</li>
<li><strong>Compare</strong> daily vs monthly TE calculations</li>
</ul>
<hr>
</section>
<section id="quick-reference-what-to-watch-for" class="level2">
<h2 class="anchored" data-anchor-id="quick-reference-what-to-watch-for">Quick Reference: What To Watch For</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 40%">
<col style="width: 34%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th>Your Portfolio Type</th>
<th>What You’ll See</th>
<th>What To Do</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Tech/Growth Heavy</strong></td>
<td>Monthly TE 15-30% higher than daily predicts</td>
<td>Build in TE buffer, rebalance more often</td>
</tr>
<tr class="even">
<td><strong>Energy/Value Tilt</strong></td>
<td>Monthly TE 10-20% lower than daily predicts</td>
<td>You have more room, don’t over-trade</td>
</tr>
<tr class="odd">
<td><strong>Broad ESG/Diversified</strong></td>
<td>Monthly TE matches daily predictions</td>
<td>Standard TE budgeting works fine</td>
</tr>
<tr class="even">
<td><strong>High Turnover</strong></td>
<td>Lower monthly TE (rebalancing cuts drift)</td>
<td>Less concern about escalation</td>
</tr>
<tr class="odd">
<td><strong>Buy &amp; Hold Active</strong></td>
<td>Higher monthly TE (drift accumulates)</td>
<td>Monitor closely, consider rebalancing</td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="common-questions-from-advisors" class="level2">
<h2 class="anchored" data-anchor-id="common-questions-from-advisors">Common Questions from Advisors</h2>
<section id="my-daily-te-has-been-0.60-for-months.-why-is-my-monthly-te-now-11" class="level3">
<h3 class="anchored" data-anchor-id="my-daily-te-has-been-0.60-for-months.-why-is-my-monthly-te-now-11">“My daily TE has been 0.60% for months. Why is my monthly TE now 11%?”</h3>
<p>Look at what you’re overweight. If it’s trending sectors (Tech, Growth), those 0.60% daily moves have been compounding. Monthly TE of 11% (vs 9.5% predicted) means you have about 15% persistence in your active bets.</p>
<p><strong>Action:</strong> Either accept the higher monthly TE or rebalance more frequently to reset the drift.</p>
</section>
<section id="my-compliance-system-flagged-me-for-exceeding-te-limits.-but-ive-been-within-daily-limits-every-day" class="level3">
<h3 class="anchored" data-anchor-id="my-compliance-system-flagged-me-for-exceeding-te-limits.-but-ive-been-within-daily-limits-every-day">“My compliance system flagged me for exceeding TE limits. But I’ve been within daily limits every day!”</h3>
<p>This is the classic persistence trap. Your compliance system measured monthly TE, which exceeded limits despite daily compliance. Your trending positions caused accumulation.</p>
<p><strong>Action:</strong> Work with compliance to either: (1) use monthly TE limits that account for persistence, or (2) set tighter daily limits that build in a buffer.</p>
</section>
<section id="should-i-be-worried-if-my-monthly-te-is-lower-than-expected" class="level3">
<h3 class="anchored" data-anchor-id="should-i-be-worried-if-my-monthly-te-is-lower-than-expected">“Should I be worried if my monthly TE is lower than expected?”</h3>
<p>Not necessarily. If you’re overweight mean-reverting sectors (Value, Energy), this is expected and actually gives you flexibility. Just watch for regime changes — if these sectors start trending, your monthly TE could suddenly increase.</p>
<p><strong>Action:</strong> Monitor sector correlations and rebalancing frequency. Document that lower monthly TE is due to mean reversion, not measurement error.</p>
</section>
<section id="how-do-i-explain-this-to-clients" class="level3">
<h3 class="anchored" data-anchor-id="how-do-i-explain-this-to-clients">“How do I explain this to clients?”</h3>
<p>Focus on what they hold, not the math:</p>
<ul>
<li><p><strong>Tech/Growth clients:</strong> “Your portfolio is positioned in sectors showing persistent strength. This means your monthly tracking tends to be higher than you might expect from daily numbers.”</p></li>
<li><p><strong>Value/Defensive clients:</strong> “Your portfolio’s positions tend to balance out over the month, so while you see daily ups and downs, the monthly tracking is actually quite modest.”</p></li>
</ul>
<hr>
</section>
</section>
<section id="key-takeaways-for-advisors" class="level2">
<h2 class="anchored" data-anchor-id="key-takeaways-for-advisors">Key Takeaways for Advisors</h2>
<ol type="1">
<li><p><strong>Your risk reports tell different stories at different horizons</strong> — this is revealing portfolio behavior, not a calculation error</p></li>
<li><p><strong>Know what you’re overweight</strong> — Tech/Growth trend (higher monthly TE), Energy/Value oscillate (lower monthly TE)</p></li>
<li><p><strong>Set appropriate buffers</strong> — Trending portfolios need looser daily limits to avoid constant rebalancing</p></li>
<li><p><strong>Communicate proactively</strong> — Explain to clients why monthly statements might show different risk than they expect</p></li>
<li><p><strong>Rebalance strategically</strong> — More frequent for trending portfolios, less frequent for mean-reverting ones</p></li>
<li><p><strong>Use the tools</strong> — The <a href="https://tracking-error-lab-kgkju98o4pqxdjoevqtsay.streamlit.app/">interactive app</a> lets you upload your data and see these effects firsthand</p></li>
</ol>
<hr>
</section>
<section id="want-to-go-deeper" class="level2">
<h2 class="anchored" data-anchor-id="want-to-go-deeper">Want to Go Deeper?</h2>
<p>This page focused on practical implications for advisors. If you want to understand the mathematical foundations:</p>
<p><strong>→ <a href="intuitive_math.html">Complete Mathematical Derivation</a></strong><br>
Step-by-step proof of why and how tracking error scales differently. Includes worked examples with Python code.</p>
<p><strong>→ <a href="technical_math.html">Advanced Technical Methods</a></strong><br>
AR(1) models, Newey-West estimation, and implementation code for quants building risk systems.</p>
<hr>
</section>
<section id="navigation" class="level2">
<h2 class="anchored" data-anchor-id="navigation">Navigation</h2>
<section id="for-more-detail" class="level3">
<h3 class="anchored" data-anchor-id="for-more-detail">For More Detail:</h3>
<p><strong>→ <a href="intuitive_math.html">Intuitive Math: Complete Derivation</a></strong><br>
Full mathematical treatment with proofs and examples</p>
<p><strong>→ <a href="technical_math.html">Technical Math: AR(1) &amp; Newey-West</a></strong><br>
Advanced methods for quantitative implementation</p>
</section>
<section id="try-it-yourself" class="level3">
<h3 class="anchored" data-anchor-id="try-it-yourself">Try It Yourself:</h3>
<ul>
<li><strong>Interactive App:</strong> <a href="https://tracking-error-lab-kgkju98o4pqxdjoevqtsay.streamlit.app/">Tracking Error Lab on Streamlit</a></li>
<li><strong>GitHub Repository:</strong> <a href="https://github.com/TejasViswa/tracking-error-lab">TejasViswa/tracking-error-lab</a></li>
</ul>



</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/TejasViswa\.github\.io\/tracking-error-lab\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p><strong>Tejas Viswanath</strong> | <a href="https://www.linkedin.com/in/tejasviswa/"><i class="bi bi-linkedin"></i> LinkedIn</a> | <a href="https://github.com/TejasViswa/"><i class="bi bi-github"></i> GitHub</a> | <a href="mailto:tejasviswa@gmail.com"><i class="bi bi-envelope"></i> Email</a></p>
</div>   
    <div class="nav-footer-center">
<p>© 2025 Tracking Error Lab</p>
</div>
    <div class="nav-footer-right">
<p>Built with <a href="https://quarto.org">Quarto</a></p>
</div>
  </div>
</footer>




</body></html>